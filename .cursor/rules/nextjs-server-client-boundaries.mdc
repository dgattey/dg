---
description: RSC boundaries and MUI theming
globs: apps/web/src/app/** packages/ui/** packages/maps/**
alwaysApply: false
---

# Server/Client Boundaries

- Default to Server Components; push `use client` to leaves.
- Never pass functions/components from server to client props.
- Props across the boundary must be serializable.
- Client components own dynamic imports.

```tsx
// bad: server passes function prop
<LazyLoadedMap FullMapCard={FullMapCard} />

// good: client owns lazy import
const FullMapCard = lazy(() => import('./mapbox/FullMapCard'));
```

## MUI theming (no `useTheme`)

- Avoid `useTheme()` or importing `Theme` from `@mui/material/styles`.
- `sx` must be plain objects; use CSS vars and static spacing.

```tsx
// bad: theme + function sx
const theme = useTheme();
<Card sx={(theme) => ({ color: theme.vars.palette.text.primary })} />

// good: CSS vars + plain object
<Card sx={{ color: 'var(--mui-palette-text-primary)', padding: '8px' }} />
```
