---
description: RSC boundaries, MUI theming, and component prop usage
globs: "**/*.tsx"
alwaysApply: false
---

# Server/Client Boundaries

- Default to Server Components; push `use client` to leaves.
- Never pass functions/components from server to client props.
- Props across the boundary must be serializable.
- Client components own dynamic imports.

```tsx
// bad: server passes function prop
<LazyLoadedMap FullMapCard={FullMapCard} />

// good: client owns lazy import
const FullMapCard = lazy(() => import('./mapbox/FullMapCard'));
```

## MUI theming (no `useTheme`)

- Avoid `useTheme()` or importing `Theme` from `@mui/material/styles`.
- `sx` must be plain objects; use CSS vars and static spacing.

```tsx
// bad: theme + function sx
const theme = useTheme();
<Card sx={(theme) => ({ color: theme.vars.palette.text.primary })} />

// good: CSS vars + plain object
<Card sx={{ color: 'var(--mui-palette-text-primary)', padding: '8px' }} />
```

## Avoid `component={Function}`

- Do not pass a function/component to MUI's `component` prop; it breaks RSC serialization.
- Use wrapper components (e.g., `Link`) or string components instead.

```tsx
// bad
import NextLink from 'next/link';

<MuiLink component={NextLink} href="/about">About</MuiLink>

// good
<NextLink href="/about" legacyBehavior passHref>
  <MuiLink>About</MuiLink>
</NextLink>
<Button component="a" href="/about">About</Button>
<Typography component="h1">Heading</Typography>
```
